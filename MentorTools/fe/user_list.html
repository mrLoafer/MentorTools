<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User List</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <h1 class="text-center mb-4">User List</h1>

    <div class="mb-3">
        <label for="role" class="form-label">Filter by Role:</label>
        <select id="role" class="form-select">
            <option value="">All</option>
            <option value="teacher">Teacher</option>
            <option value="student">Student</option>
        </select>
    </div>

    <button class="btn btn-primary mb-3" onclick="fetchUsers()">Get Users</button>

    <ul id="userList" class="list-group"></ul>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function fetchUsers() {
        const role = document.getElementById('role').value;
        let url = 'http://localhost:8080/users';
        if (role) {
            url += `?role=${role}`;
        }

        fetch(url)
            .then(response => response.json())
            .then(users => {
                const userList = document.getElementById('userList');
                userList.innerHTML = ''; // Очистить список перед обновлением
                users.forEach(user => {
                    const li = document.createElement('li');
                    li.className = 'list-group-item';
                    li.textContent = `${user.name} (${user.email}) - ${user.role}`;
                    userList.appendChild(li);
                });
            })
            .catch(error => console.error('Error:', error));
    }
</script>

</body>
</html>