<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Details</title>
    <script>
        // Функция для загрузки деталей слова
        function loadWordDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const wordId = urlParams.get('id'); // Получаем ID слова из URL
    
            const token = localStorage.getItem('token'); // Получаем токен
    
            // Запрос к API для получения деталей слова
            fetch(`/get-word-details?id=${wordId}`, {
                headers: {
                    'Authorization': `Bearer ${token}` // Добавляем токен в заголовок
                }
            })
            .then(response => {
                // Проверяем, был ли успешный ответ
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(word => {
                console.log('Word data:', word); // Логирование данных слова
                console.log('Examples:', word.examples); // Логирование примеров
    
                // Заполняем данные на странице
                document.getElementById('word').textContent = word.word || 'N/A';
                document.getElementById('transcription').textContent = word.transcription || 'N/A';
                document.getElementById('translation').textContent = word.translation || 'N/A';
                document.getElementById('description').textContent = word.description || 'N/A';
    
                // Заполнение синонимов
                const synonymsList = document.getElementById('synonyms');
                if (word.synonyms && word.synonyms.length > 0) {
                    word.synonyms.forEach(synonym => {
                        const li = document.createElement('li');
                        li.textContent = synonym;
                        synonymsList.appendChild(li);
                    });
                } else {
                    const noSynonyms = document.createElement('li');
                    noSynonyms.textContent = 'No synonyms available';
                    synonymsList.appendChild(noSynonyms);
                }
    
                // Заполнение примеров
                const exampleList = document.getElementById('examples');
                if (word.examples && word.examples.length > 0) {
                    word.examples.forEach(example => {
                        const li = document.createElement('li');
                        li.innerHTML = `${example.sentence} <br> Translation: ${example.translation}`;
                        exampleList.appendChild(li);
                    });
                } else {
                    const noExamples = document.createElement('li');
                    noExamples.textContent = 'No examples available';
                    exampleList.appendChild(noExamples);
                }
            })
            .catch(error => {
                console.error('Error loading word details:', error);
            });
        }
    
        // Загружаем данные при загрузке страницы
        window.onload = loadWordDetails;
    </script>
</head>
<body>
    <h1>Word Details</h1>

    <h2 id="word"></h2>
    <p><strong>Transcription:</strong> <span id="transcription"></span></p>
    <p><strong>Translation:</strong> <span id="translation"></span></p>
    <p><strong>Description:</strong> <span id="description"></span></p>

    <h3>Synonyms</h3>
    <ul id="synonyms">
        <!-- Синонимы будут загружены сюда -->
    </ul>

    <h3>Examples</h3>
    <ul id="examples">
        <!-- Примеры будут загружены сюда -->
    </ul>

</body>
</html>